---
import Layout from '../../layouts/Layout.astro';
import { getAllCanvases } from '../../utils/canvas';

const canvases = await getAllCanvases();
---

<Layout title="Canvas" container="full">
  <main>
    <nav class="text-sm mb-6 text-gray-600 border-b border-gray-200 pb-4">
      <a href="/" class="text-blue-600 hover:text-red-600 hover:underline">首页</a>
      <span class="mx-2">/</span>
      <span class="text-black font-medium">Canvas</span>
    </nav>

    <h1 class="text-3xl font-bold mb-6 border-b-2 border-black pb-4">Canvas</h1>

    {canvases.length > 0 ? (
      <ul class="space-y-0 text-base border-t border-gray-300">
        {canvases.map((canvas) => (
          <li class="group py-3 border-b border-gray-300 hover:bg-gray-50 transition-colors">
            <a
              href={`/canvas/${encodeURIComponent(canvas.slug)}`}
              class="text-blue-600 hover:text-red-600 hover:underline visited:text-purple-800 font-medium text-lg"
            >
              {canvas.title}
            </a>
            <div class="text-xs text-gray-500 mt-1">
              /canvas/{canvas.slug} · {canvas.document.nodes.length} nodes · {canvas.document.edges.length} edges
            </div>
          </li>
        ))}
      </ul>
    ) : (
      <div class="py-16 text-center bg-gray-50 border border-gray-200">
        <p class="text-gray-600">content 目录下暂无 .canvas 文件</p>
      </div>
    )}
  </main>
</Layout>
